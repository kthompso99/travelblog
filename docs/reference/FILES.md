# Complete File Reference

A comprehensive guide to every file in the travel blog project.

## ğŸ“„ File List

### Core Files (Required)

| File | Type | Purpose | Edit? | Deploy? |
|------|------|---------|-------|---------|
| `index.html` | Frontend | Main website | Rarely | âœ… Yes |
| `config.json` | Source | Destination configuration | âœ… Yes | âŒ No |
| `config.built.json` | Generated | Pre-processed data | âŒ No | âœ… Yes |
| `build.js` | Build Tool | Main build script | Rarely | âŒ No |
| `package.json` | Config | Node.js dependencies | Rarely | âŒ No |

### Content Files (Edit These)

| File | Purpose |
|------|---------|
| `content/*.md` | Travel blog posts in Markdown |
| `images/*.jpg/png` | Optional thumbnail images |

### Build Tools (Optional but Helpful)

| File | Purpose | When to Use |
|------|---------|-------------|
| `validate.js` | Validate config.json | Before building |
| `add-destination.js` | Add destinations interactively | When adding content |
| `deploy-check.js` | Pre-deployment verification | Before deploying |

### Documentation

| File | Purpose |
|------|---------|
| `README.md` | Full documentation |
| `QUICKSTART.md` | Fast reference guide |
| `PROJECT.md` | Complete project overview |
| `DEPLOYMENT.md` | Platform-specific deployment |
| `FILES.md` | This file |

### Configuration Files

| File | Purpose |
|------|---------|
| `Makefile` | Convenience commands |
| `.gitignore` | Git ignore rules |
| `package-lock.json` | Locked dependencies (auto-generated) |

---

## ğŸ“ Detailed File Descriptions

### index.html
**Purpose:** The main website that users see in their browser

**Contains:**
- HTML structure
- CSS styling (embedded)
- JavaScript application logic
- Map initialization (Leaflet.js)
- Markdown rendering (Marked.js)
- Navigation system
- Content loading logic

**Key Features:**
- Loads `config.built.json` for fast performance
- Falls back to `config.json` + real-time processing if built file missing
- Responsive design
- Interactive world map
- Cascading destination menus
- Dynamic content rendering

**When to Edit:**
- Changing colors/styling
- Modifying layout
- Adding new pages
- Customizing functionality

**Lines of Code:** ~600

---

### config.json
**Purpose:** Source configuration file that you edit

**Structure:**
```json
{
  "site": {
    "title": "Your blog name",
    "description": "Your tagline"
  },
  "destinations": [
    {
      "id": "unique-id",
      "name": "Display Name",
      "continent": "Continent Name",
      "country": "Country",
      "location": "Place name for geocoding",
      "contentFile": "path/to/file.md",
      "thumbnail": "path/to/image.jpg"
    }
  ]
}
```

**Fields Explained:**
- `id`: Unique identifier (lowercase-with-hyphens)
- `name`: What visitors see
- `continent`: Must match: Africa, Antarctica, Asia, Europe, North America, South America, Oceania
- `country`: Optional but recommended
- `location`: Gets geocoded to coordinates (e.g., "Eiffel Tower")
- `coordinates`: Manual override `{"lat": 48.8584, "lng": 2.2945}`
- `contentFile`: Path to markdown content
- `thumbnail`: Optional image path

**When to Edit:**
- Adding new destinations
- Updating destination info
- Changing site title/description

**Validated by:** `validate.js`
**Processed by:** `build.js`
**Not deployed** (source file only)

---

### config.built.json
**Purpose:** Generated file with pre-processed data for production

**Generated by:** `build.js`

**Contains:**
- All config.json data
- Plus: Geocoded coordinates for each destination
- Plus: Pre-rendered HTML from markdown files

**Structure:**
```json
{
  "site": { ... },
  "destinations": [
    {
      "id": "paris",
      "name": "Paris, France",
      "coordinates": {
        "lat": 48.8584,
        "lng": 2.2945
      },
      "contentHtml": "<h1>Paris</h1><p>Content...</p>",
      ...
    }
  ]
}
```

**Why it exists:**
- âš¡ Enables fast page loads
- ğŸš« No runtime API calls
- ğŸš« No runtime markdown conversion
- âœ… Everything pre-processed

**Never edit manually** - always regenerate with `npm run build`

**Size:** Typically 50KB - 2MB depending on content

---

### build.js
**Purpose:** Main build script that processes everything offline

**What it does:**
1. Reads `config.json`
2. For each destination:
   - Geocodes location name â†’ coordinates
   - Reads markdown file
   - Converts markdown â†’ HTML
3. Writes `config.built.json`

**Key Features:**
- Rate limiting (1 req/sec for geocoding)
- Error handling
- Progress output
- Uses Nominatim API (OpenStreetMap)
- Uses Marked.js for markdown

**Usage:**
```bash
node build.js
# or
npm run build
```

**Output Example:**
```
ğŸš€ Starting build process...

ğŸ“ Processing 5 destinations...

[1/5] Processing Paris, France...
  ğŸ—ºï¸  Geocoding: Eiffel Tower
  âœ… Coordinates: 48.8584, 2.2945
  ğŸ“ Converting markdown: content/paris.md
  âœ… HTML generated (2341 chars)

[2/5] Processing Tokyo, Japan...
  ...

âœ… Build complete! Output written to config.built.json

ğŸ“Š Summary:
   - Geocoded: 5 locations
   - Converted: 5 markdown files
```

**Dependencies:**
- `marked` npm package

**Lines of Code:** ~150

---

### package.json
**Purpose:** Node.js project configuration

**Contains:**
- Project metadata
- Dependencies (`marked`)
- Dev dependencies (`nodemon`)
- NPM scripts

**Scripts:**
```json
{
  "validate": "node validate.js",
  "build": "node validate.js && node build.js",
  "watch": "nodemon --watch config.json --watch content/ --exec 'node validate.js && node build.js'",
  "serve": "npx http-server -p 8000 -o",
  "add": "node add-destination.js",
  "deploy-check": "node deploy-check.js"
}
```

**When to Edit:**
- Adding npm dependencies
- Changing project name/version
- Adding new scripts

---

### validate.js
**Purpose:** Validates `config.json` before building

**Checks:**
- âœ… Valid JSON syntax
- âœ… Required fields present
- âœ… Valid continent names
- âœ… Unique IDs
- âœ… Content files exist
- âœ… ID format (lowercase-with-hyphens)
- âœ… Coordinate ranges (-90 to 90, -180 to 180)
- âš ï¸ Warnings for missing optional fields

**Usage:**
```bash
node validate.js
# or
npm run validate
```

**Output Example:**
```
ğŸ” Validating configuration...

â„¹ï¸  Found 5 destination(s)
â„¹ï¸  Destination #1 (Paris, France): Content file OK (2341 bytes)
â„¹ï¸  Destination #2 (Tokyo, Japan): Content file OK (1876 bytes)
âš ï¸  WARNING: Destination #3 (Rome, Italy): Thumbnail file not found: images/rome.jpg

âœ… Validation passed! Ready to build.
```

**Exit Codes:**
- `0`: Success (or warnings only)
- `1`: Errors found (blocks build)

**Lines of Code:** ~180

---

### add-destination.js
**Purpose:** Interactive CLI tool for adding new destinations

**Features:**
- Step-by-step prompts
- Auto-generates ID from name
- Validates continent selection
- Checks for duplicate IDs
- Creates markdown template
- Updates config.json

**Usage:**
```bash
node add-destination.js
# or
npm run add
```

**Interactive Flow:**
```
ğŸŒ Add New Destination

Destination name (e.g., "Paris, France"): Rome, Italy
ID (press enter for "rome-italy"): rome
Country: Italy
Select continent:
  1. Africa
  2. Antarctica
  3. Asia
  4. Europe
  ...
Continent (1-7): 4
Famous landmark/location: Colosseum
Content file (press enter for "content/rome.md"): 
Thumbnail image path (optional): images/rome.jpg

âœ… Destination added to config.json!

Create content file template? (y/n): y
âœ… Created content/rome.md

ğŸ“‹ Next steps:
  1. Edit the content file
  2. Run "npm run build"
  3. Refresh browser
```

**Template Created:**
```markdown
# Rome, Italy

Welcome to Rome, Italy!

## Overview
...
## Best Time to Visit
...
```

**Lines of Code:** ~140

---

### deploy-check.js
**Purpose:** Pre-deployment verification checklist

**Checks:**
- âœ… `config.built.json` exists
- âœ… Build is up-to-date
- âœ… `index.html` exists
- âœ… All destinations have HTML
- âœ… All destinations have coordinates
- âš ï¸ Thumbnail images exist (warning)
- âš ï¸ File size reasonable (warning)

**Usage:**
```bash
node deploy-check.js
# or
npm run deploy-check
```

**Output Example:**
```
ğŸš€ Pre-Deployment Checklist

âœ… config.built.json exists
âœ… Build is up to date
âœ… index.html exists
âœ… All destinations have HTML content
âœ… All destinations have coordinates
âš ï¸  All thumbnail images exist
   2 thumbnail(s) not found: Sydney, Cairo
âœ… config.built.json size is reasonable

ğŸ“Š Summary:
   âœ… Passed: 6
   âš ï¸  Warnings: 1

âš ï¸  Deployment possible with warnings.

ğŸ“¦ Files to deploy:
   âœ… index.html
   âœ… config.built.json
   âœ… images/

âŒ Do NOT deploy:
   âŒ config.json
   âŒ content/
   âŒ *.js
   âŒ package.json, node_modules/
```

**Exit Codes:**
- `0`: Ready to deploy
- `1`: Errors found (don't deploy)

**Lines of Code:** ~150

---

### content/*.md
**Purpose:** Markdown files containing blog post content

**Location:** `content/` directory

**Format:** Standard Markdown

**Example Structure:**
```markdown
# Destination Name

Introduction paragraph...

## Section Heading

Content with **bold** and *italic*.

### Subsection

- Bullet points
- More bullets

## Another Section

Content continues...

---

*Last updated: October 2025*
```

**Markdown Features Supported:**
- Headers (# ## ###)
- Bold, italic, strikethrough
- Lists (ordered and unordered)
- Links `[text](url)`
- Images `![alt](path)`
- Code blocks
- Blockquotes
- Horizontal rules

**Best Practices:**
- Use descriptive headers
- Keep paragraphs short
- Add practical information
- Include "last updated" date
- Optimize images before adding

**Converted by:** `build.js` using Marked.js
**Output:** HTML in `config.built.json`

---

### images/
**Purpose:** Optional directory for thumbnail images

**Recommended:**
- Format: JPG or PNG
- Size: Max 1200px wide
- File size: < 500KB each
- Naming: `destination-id.jpg`

**Referenced in:** `config.json` thumbnail field

**Optimization:**
```bash
# Using ImageMagick
convert input.jpg -resize 1200x -quality 80 output.jpg

# Using online tools
# TinyPNG, ImageOptim, etc.
```

**Not required** - placeholders shown if missing

---

### Makefile
**Purpose:** Convenience commands (optional)

**Requires:** `make` command (pre-installed on Mac/Linux)

**Commands:**
```bash
make help          # Show all commands
make install       # npm install
make validate      # Validate config
make build         # Build site
make watch         # Auto-rebuild
make serve         # Start server
make add           # Add destination
make clean         # Remove built files
make deploy        # Prepare deployment
```

**Benefits:**
- Shorter commands
- Easier to remember
- Works across projects
- No need to remember npm scripts

**Optional:** You can use npm scripts instead

---

### .gitignore
**Purpose:** Tells Git which files not to track

**Ignores:**
- `node_modules/` - Dependencies
- `config.built.json` - Generated file
- `.DS_Store` - Mac OS files
- `*.log` - Log files
- IDE configs

**Why ignore config.built.json:**
- It's generated by build
- Changes on every build
- Would create merge conflicts
- Should be built fresh for each deployment

**Git workflow:**
```bash
# Track source files
git add config.json content/ images/

# Ignore built files (automatic)
# config.built.json not added

git commit -m "Add new destination"
git push
```

---

## ğŸ”„ File Relationships

### The Build Chain
```
config.json  â”€â”€â”€â”€â”
                  â”œâ”€â”€> build.js â”€â”€> config.built.json â”€â”€> index.html
content/*.md â”€â”€â”€â”€â”˜
```

### Validation Flow
```
config.json â”€â”€> validate.js â”€â”€> âœ…/âŒ
                                 â”‚
                                 â†“
                          (if valid)
                                 â”‚
                                 â†“
                             build.js
```

### Development Workflow
```
1. Edit: config.json, content/*.md
2. Validate: validate.js
3. Build: build.js
4. Check: deploy-check.js
5. Test: index.html (local server)
6. Deploy: config.built.json + index.html
```

---

## ğŸ“¦ What to Deploy

### âœ… Deploy These
```
index.html          # Frontend application
config.built.json   # Pre-processed data
images/             # Thumbnails (if you have them)
```

### âŒ Don't Deploy These
```
config.json         # Source file (not needed in production)
content/            # Markdown sources (already in config.built.json)
build.js            # Build script
validate.js         # Validation script
add-destination.js  # CLI tool
deploy-check.js     # Deployment checker
package.json        # Node config
package-lock.json   # Lock file
node_modules/       # Dependencies
Makefile            # Build commands
.gitignore          # Git config
README.md           # Documentation
*.md                # All documentation
```

---

## ğŸ¯ Quick Reference

### When You Want To...

**Add a new destination:**
```bash
npm run add          # Interactive
# or edit config.json manually
npm run build
```

**Update existing content:**
```bash
# Edit content/destination.md
npm run build
```

**Change site title:**
```bash
# Edit config.json â†’ site.title
npm run build
```

**Customize styling:**
```bash
# Edit index.html CSS section
# No build needed (but test locally)
```

**Prepare for deployment:**
```bash
npm run validate
npm run build
npm run deploy-check
```

**Deploy to production:**
```bash
# Upload: index.html, config.built.json, images/
# See DEPLOYMENT.md for platform-specific instructions
```

---

## ğŸ“Š File Size Reference

Typical file sizes in a small blog (5-10 destinations):

| File | Size |
|------|------|
| index.html | ~50KB |
| config.json | ~2KB |
| config.built.json | ~50-500KB |
| content/destination.md | ~2-5KB each |
| images/thumbnail.jpg | ~100-500KB each |
| Total deployment | ~300KB - 3MB |

**Performance Impact:**
- Initial page load: config.built.json size
- Subsequent navigation: Instant (already loaded)

---

## ğŸ” Troubleshooting by File

**Problem: Site not loading**
â†’ Check: `index.html` exists and is valid HTML

**Problem: Destinations not showing**
â†’ Check: `config.built.json` exists and has content

**Problem: Map not displaying**
â†’ Check: Coordinates in `config.built.json` are valid

**Problem: Content not found**
â†’ Check: `contentFile` paths in `config.json` are correct

**Problem: Geocoding failed**
â†’ Check: `location` field in `config.json` is specific enough

**Problem: Build fails**
â†’ Run: `npm run validate` to see what's wrong

**Problem: Deployment checklist fails**
â†’ Run: `npm run build` to regenerate built file

---

## ğŸ“š Further Reading

- **For editing:** See config.json and content/*.md
- **For building:** See build.js and package.json
- **For deploying:** See DEPLOYMENT.md
- **For understanding:** See PROJECT.md
- **For quick start:** See QUICKSTART.md

---

*This document covers all files in the project. Need more details? Check the specific documentation files listed above.*